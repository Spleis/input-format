{"version":3,"sources":["../source/input control.test.js"],"names":["onChange","onCut","onPaste","onKeyDown","Keys","templateParser","templateFormatter","parseDigit","TEMPLATE","parse","format","describe","it","input","value","selectionStart","selectionEnd","setSelectionRange","position","on_change","_","expect","to","equal","done","setTimeout","be","undefined","event","keyCode","Delete","preventDefault","Backspace"],"mappings":"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","file":"input control.test.js","sourcesContent":["import\n{\n\tonChange,\n\tonCut,\n\tonPaste,\n\tonKeyDown\n}\nfrom './input control'\n\nimport { Keys } from './dom'\n\nimport templateParser from './template parser'\nimport templateFormatter from './template formatter'\nimport parseDigit from './parse digit'\n\n// US phone number template\nconst TEMPLATE = '(xxx) xxx-xxxx'\nconst parse = templateParser(TEMPLATE, parseDigit)\nconst format = templateFormatter(TEMPLATE)\n\ndescribe('input control', function()\n{\n\tit('should handle onChange', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonChange({}, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 456-7')\n\t\texpect(input.selectionStart).to.equal(8)\n\t\texpect(value).to.equal('1234567')\n\t})\n\n\tit('should handle onCut', function(done)\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonCut({}, input, parse, format, on_change)\n\n\t\tsetTimeout(() =>\n\t\t{\n\t\t\texpect(input.value).to.equal('(123) 456-7')\n\t\t\texpect(input.selectionStart).to.equal(8)\n\t\t\texpect(value).to.equal('1234567')\n\t\t\tdone()\n\t\t},\n\t\t0)\n\t})\n\n\tit('should handle onPaste', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 5,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonPaste({}, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 456-7')\n\t\texpect(input.selectionStart).to.equal(8)\n\t\texpect(value).to.equal('1234567')\n\t})\n\n\tit('should handle onPaste (with selection)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonPaste({}, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 457')\n\t\texpect(input.selectionStart).to.equal(8)\n\t\texpect(value).to.equal('123457')\n\t})\n\n\tit('should not handle onKeyDown', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown({}, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('1234567-')\n\t\texpect(input.selectionStart).to.equal(5)\n\t\texpect(value).to.be.undefined\n\t})\n\n\tit('should handle onKeyDown (Delete)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 5,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tconst event =\n\t\t{\n\t\t\tkeyCode: Keys.Delete,\n\t\t\tpreventDefault() {}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown(event, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 457')\n\t\texpect(input.selectionStart).to.equal(8)\n\t\texpect(value).to.equal('123457')\n\t})\n\n\tit('should handle onKeyDown (Backspace)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 5,\n\t\t\tselectionEnd: 5,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tconst event =\n\t\t{\n\t\t\tkeyCode: Keys.Backspace,\n\t\t\tpreventDefault() {}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown(event, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 467')\n\t\texpect(input.selectionStart).to.equal(7)\n\t\texpect(value).to.equal('123467')\n\t})\n\n\tit('should handle onKeyDown (Backspace with selection)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 4,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tconst event =\n\t\t{\n\t\t\tkeyCode: Keys.Backspace,\n\t\t\tpreventDefault() {}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown(event, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 47')\n\t\texpect(input.selectionStart).to.equal(7)\n\t\texpect(value).to.equal('12347')\n\t})\n\n\tit('should handle onKeyDown (Delete with selection)', function()\n\t{\n\t\tconst input =\n\t\t{\n\t\t\tvalue: '1234567-',\n\t\t\tselectionStart: 4,\n\t\t\tselectionEnd: 6,\n\t\t\tsetSelectionRange(position)\n\t\t\t{\n\t\t\t\tthis.selectionStart = position\n\t\t\t}\n\t\t}\n\n\t\tconst event =\n\t\t{\n\t\t\tkeyCode: Keys.Delete,\n\t\t\tpreventDefault() {}\n\t\t}\n\n\t\tlet value\n\t\tconst on_change = _ => value = _\n\n\t\tonKeyDown(event, input, parse, format, on_change)\n\n\t\texpect(input.value).to.equal('(123) 47')\n\t\texpect(input.selectionStart).to.equal(7)\n\t\texpect(value).to.equal('12347')\n\t})\n})"]}